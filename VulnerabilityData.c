#include <stdio.h>

struct vulnerability //initialise a structure to read the data in to
{
	float ID;
	char vulname;
	char location;
	int rating;
};

struct vulnerability vulnerabilities[9];

main()
{
	printf("Please pick one of the following:\n 1. Enter the ID number to see the vulnerability name\n 2. Enter and array of ID numbers to see their average rating\n 3. See all ID numbers in order of risk rating\n 4. Type a base URL to see the vulnerabilities on this site\n");
	int choice = 0; //variable for the menu choice
	scanf("%d", &choice);
	int a;
	FILE fp* = fopen("vulnerabilities.txt", "r");  //open the file to read in to structures

	if (fp == NULL)
	{
		printf("error opening file\n"); //error check that file opens
	}
	else
	{
		for(int i=0;i=<10;i++)
		{

			while(!feof(fp))
			{
				//push data seperated by ":" from file in to structures
				vulnerability[i] = (fscanf(fp, "%f:", "%s:", "%s:", "%d:", i->ID, i->vulname, i->location, i->rating));
			}
		}
		fclose(fp); //close file
	}


	switch (choice)
	{
		case 1:
		{
			printf("Please choose an ID number:\n");
			char inputone;
			scanf("%s", &inputone);
			for(i=0;i<10;i++)
			{
				if(inputone == vulnerabilities[i].ID) //find value that matches input
				{
					printf("The name assosciated with that ID is %s\n", vulnerabilities[i].vulname);
				}
			}
        break;
		}

		case 2:
		{
			char** IDarray[10];
			char** RatingArray[10];
			printf("Please enter up to 10 ID numbers to see their average rating:\n");
			for (int i = 0; i < 10; i++)
			{
				scanf("%s", IDarray[i]);  // read input in to array of ids
			}
			int ratingsum = 0;
			int ratingcounter = 0;
			for (i = 0; i < 10; i++)
			{
				if(IDarray[i] == vulnerabilities[i].ID)
				{
					ratingsum = ratingsum + vulnerabilities[i].rating; //update the sum of the ratings
					ratingcounter++;
				}
			}
			 int ans = ratingsum / ratingcounter;  //sum of ratings added divided by amount of ratings
			 printf("%d", &ans);
		break;
		}

		case 3:
		{
			for (i=0;i<10;i++)
			{
				vulnerabilities[i].rating
				//use a bubble sort function to sort the ratings in to ascending order
			}
		break;
		}

		case 4:
		{
			printf("Please type in the url whose vulnerabilities you would like to list:\n");
			char urlcheck;
			scanf("%s", &urlcheck);
			for(i=0;i<10;i++)
			{
				if(vulnerabilities[i].location == urlcheck)  //find the url that matches the input
				{
					printf("%s\n", vulnerabilities[i].ID);   // print the id number of the vulnerability
				}
			}
		break;
		}
	}
}

